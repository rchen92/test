select 'alter system set '||NAME||'='||VALUE||' scope=spfile;' from v$parameter  where name in ('db_name','db_unique_name','archive_lag_target ','fal_client','fal_server','log_archive_config',
'log_archive_dest_1','log_archive_dest_2','log_archive_dest_state_1','log_archive_dest_state_2','db_file_name_convert','log_file_name_convert','standby_file_management',
lower('REMOTE_LOGIN_PASSWORDFILE'),lower('LOG_ARCHIVE_FORMAT'),lower('LOG_ARCHIVE_MAX_PROCESSES'), 'control_files') order by name;
--旧的参数
alter system set control_files=+DATA/orcl/controlfile/current.260.927200549, +FRA/orcl/controlfile/current.256.927200549 scope=spfile;
alter system set db_file_name_convert= scope=spfile;
alter system set db_name=orcl scope=spfile;
alter system set db_unique_name=orcl scope=spfile;
alter system set fal_client= scope=spfile;
alter system set fal_server= scope=spfile;
alter system set log_archive_config= scope=spfile;
alter system set log_archive_dest_1= scope=spfile;
alter system set log_archive_dest_2= scope=spfile;
alter system set log_archive_dest_state_1=enable scope=spfile;
alter system set log_archive_dest_state_2=enable scope=spfile;
alter system set log_archive_format=%t_%s_%r.dbf scope=spfile;
alter system set log_archive_max_processes=4 scope=spfile;
alter system set log_file_name_convert= scope=spfile;
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;
alter system set standby_file_management=MANUAL scope=spfile;
--新参数
alter system set db_file_name_convert='orcldg', 'orcl' scope=spfile;                            
--alter system set db_name='orcl' scope=spfile;                                   
alter system set db_unique_name=orcl scope=spfile;                            
alter system set fal_client='orcl' scope=spfile; 
--Primary Database: Standby Role Initialization Parameters
alter system set fal_server='orcldg' scope=spfile;                                      
alter system set log_archive_config='DG_CONFIG=(orcl,orcldg)' scope=spfile;                              
--alter system set log_archive_dest_1='location=/arch VALID_FOR=(ALL_LOGFILES,ALL_ROLES)   DB_UNIQUE_NAME=orcl' scope=spfile; 
alter system set log_archive_dest_1='location=use_db_recovery_file_dest VALID_FOR=(ALL_LOGFILES,ALL_ROLES)   DB_UNIQUE_NAME=orcl' scope=spfile;            
alter system set log_archive_dest_2='SERVICE=orcldg ASYNC   VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=orcldg' scope=spfile;                              
alter system set log_archive_dest_state_1=enable scope=spfile;                  
alter system set log_archive_dest_state_2=enable scope=spfile; 
alter system set log_archive_format='%t_%s_%r.dbf' scope=spfile;                  
alter system set log_archive_max_processes=10 scope=spfile;
--Primary Database: Standby Role Initialization Parameters
--alter system set log_file_name_convert='orcldg', 'orcl' scope=spfile;
alter system set log_file_name_convert='orcldg','orcl'  scope=spfile;
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;  
--Primary Database: Standby Role Initialization Parameters
alter system set standby_file_management=auto scope=spfile; 




create pfile='/u01/app/oracle/product/11.2.0/db_1/dbs/initorcl.ora.old' from spfile;


--一个主库,2个备库的设置
--shrac1
alter system set control_files=+DATA/shpa/controlfile/control01.ctl, +FRA/shpa/controlfile/control02.ctl scope=spfile;
alter system set db_file_name_convert=+DATA1, +DATA scope=spfile;
alter system set db_name=shibxpr scope=spfile;
alter system set db_unique_name=shpa scope=spfile;
alter system set fal_client= scope=spfile;
alter system set fal_server=SHRPT scope=spfile;
alter system set log_archive_config=dg_config=(shpa,szpa,shrpt) scope=spfile;
alter system set log_archive_dest_1= location=use_db_recovery_file_dest VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=shpa scope=spfile;
alter system set log_archive_dest_2=service=szpa  valid_for=(online_logfiles ,primary_role) compression=enable db_unique_name=szpa scope=spfile;
alter system set log_archive_dest_state_1=enable scope=spfile;
alter system set log_archive_dest_state_2=ENABLE scope=spfile;
alter system set log_archive_format=%t_%s_%r.dbf scope=spfile;
alter system set log_archive_max_processes=4 scope=spfile;
alter system set log_file_name_convert=+DATA1, +DATA, +FRA1, +FRA scope=spfile;
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;
alter system set standby_file_management=AUTO scope=spfile;

--szdg
alter system set control_files=+DATA1/szpa/controlfile/control01.ctl, +FRA1/szpa/controlfile/control02.ctl scope=spfile;
alter system set db_file_name_convert=+DATA, +DATA1 scope=spfile;
alter system set db_name=shibxpr scope=spfile;
alter system set db_unique_name=szpa scope=spfile;
alter system set fal_client= scope=spfile;
alter system set fal_server=shpa scope=spfile;
alter system set log_archive_config=dg_config=(shpa,szpa,shrpt) scope=spfile;
alter system set log_archive_dest_1=location=use_db_recovery_file_dest valid_for=(all_logfiles,all_roles) db_unique_name=szpa scope=spfile;
alter system set log_archive_dest_2=service=shpa  valid_for=(online_logfiles, primary_role) db_unique_name=shpa scope=spfile;
alter system set log_archive_dest_state_1=ENABLE scope=spfile;
alter system set log_archive_dest_state_2=ENABLE scope=spfile;
alter system set log_archive_format=%t_%s_%r.dbf scope=spfile;
alter system set log_archive_max_processes=4 scope=spfile;
alter system set log_file_name_convert=+DATA, +DATA1, +FRA, +FRA1 scope=spfile;
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;
alter system set standby_file_management=AUTO scope=spfile;

szpa=
  (DESCRIPTION=
    (ADDRESS=
      (PROTOCOL=TCP)
      (HOST=172.19.2.11)
      (PORT=1521)
    )
    (CONNECT_DATA=
      (SERVER=dedicated)
      (SERVICE_NAME=szpa)
    )
  )
--shdg
alter system set control_files=+DATA/shrpt/controlfile/control01.ctl, +FRA/shrpt/controlfile/control02.ctl scope=spfile;
alter system set db_file_name_convert=+DATA1, +DATA scope=spfile;
alter system set db_name=shibxpr scope=spfile;
alter system set db_unique_name=shrpt scope=spfile;
alter system set fal_client= scope=spfile;
alter system set fal_server=shpa scope=spfile;
alter system set log_archive_config=dg_config=(shpa,szpa,shrpt) scope=spfile;
alter system set log_archive_dest_1=location=use_db_recovery_file_dest valid_for=(all_logfiles,all_roles) db_unique_name=shrpt scope=spfile;
alter system set log_archive_dest_2=service=shpa compression=enable lgwr async valid_for=(online_logfiles, primary_role) db_unique_name=shpa scope=spfile;
alter system set log_archive_dest_state_1=ENABLE scope=spfile;
alter system set log_archive_dest_state_2=ENABLE scope=spfile;
alter system set log_archive_format=%t_%s_%r.dbf scope=spfile;
alter system set log_archive_max_processes=4 scope=spfile;
alter system set log_file_name_convert=+DATA1, +DATA, +FRA1, +FRA scope=spfile;
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;
alter system set standby_file_management=AUTO scope=spfile;





