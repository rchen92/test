SQL> set head off
SQL> SELECT UTL_INADDR.GET_HOST_ADDRESS,
  2  SYS_CONTEXT('userenv', 'ip_address')
  3  FROM DUAL;

172.16.2.2                                                                      
172.20.0.240                                                                    
                                                                                

SQL> --SELECT NAME,VALUE FROM v$parameter ORDER BY NAME;
SQL> --SELECT 'alter system set '||NAME||'='||VALUE||' scope=spfile;' FROM v$parameter ORDER BY NAME;
SQL> select 'alter system set '||NAME||'='||VALUE||' scope=spfile;' from v$parameter  where name in ('db_name','db_unique_name','archive_lag_target ','fal_client','fal_server','log_archive_config',
  2  'log_archive_dest_1','log_archive_dest_2','log_archive_dest_state_1','log_archive_dest_state_2','db_file_name_convert','log_file_name_convert','standby_file_management',
  3  lower('REMOTE_LOGIN_PASSWORDFILE'),lower('LOG_ARCHIVE_FORMAT'),lower('LOG_ARCHIVE_MAX_PROCESSES'), 'control_files') order by name;

alter system set control_files=/data/oradata/o11gr2/control01.ctl, /data/flash_recovery_area/o11gr2/control02.ctl scope=spfile;                                 
                                                                                
alter system set db_file_name_convert= scope=spfile;                            
alter system set db_name=o11gr2 scope=spfile;                                   
alter system set db_unique_name=o11gr2 scope=spfile;                            
alter system set fal_client= scope=spfile;                                      
alter system set fal_server= scope=spfile;                                      
alter system set log_archive_config= scope=spfile;                              
alter system set log_archive_dest_1=location=/archive scope=spfile;             
alter system set log_archive_dest_2= scope=spfile;                              
alter system set log_archive_dest_state_1=enable scope=spfile;                  
alter system set log_archive_dest_state_2=enable scope=spfile;                  

alter system set log_archive_format=%t_%s_%r.dbf scope=spfile;                  
alter system set log_archive_max_processes=4 scope=spfile;                      
alter system set log_file_name_convert= scope=spfile;                           
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;              
alter system set standby_file_management=MANUAL scope=spfile;                   

已选择16行。

SQL> 
SQL> spool off


control_files	/oracle/oradata/orcl/control01.ctl, /oracle/fast_recovery_area/orcl/control02.ctl
备库改为orcl ---orcldg
alter system set db_file_name_convert='orcl', 'orcldg'   scope=spfile;
alter system set fal_client='orcl' scope=both;
alter system set fal_server='orcldg' scope=both;
alter system set LOG_ARCHIVE_CONFIG='DG_CONFIG=(orcl,orcldg)' scope=both;
alter system set LOG_ARCHIVE_DEST_1='LOCATION=/oracle/fast_recovery_area   VALID_FOR=(ALL_LOGFILES,ALL_ROLES)   DB_UNIQUE_NAME=orcl' scope=both;
alter system set LOG_ARCHIVE_DEST_2='SERVICE=orcldg ASYNC   VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=orcldg' scope=both;
alter system set log_file_name_convert='/oracle/fast_recovery_area','/oracle/fast_recovery_area' scope=spfile;
log_file_name_convert                string
/oracle/oradata/orcl, /oracle/
oradata/orcldg
alter system set log_archive_max_processes=30 scope=both;
alter system set standby_file_management=auto scope=both;


alter system set control_files='/data/oradata/o11gr2/control01.ctl', '/data/flash_recovery_area/o11gr2/control02.ctl' scope=spfile;                                
                                                                                
alter system set db_file_name_convert='o11gr2', 'o11gr2dg' scope=spfile;                            
alter system set db_name=o11gr2 scope=spfile;                                   
alter system set db_unique_name=o11gr2 scope=spfile;                            
alter system set fal_client='o11gr2' scope=spfile;                                      
alter system set fal_server='o11gr2dg' scope=spfile;                                      
alter system set log_archive_config='DG_CONFIG=(o11gr2,o11gr2dg)' scope=spfile;                              
--alter system set log_archive_dest_1='location=/archive VALID_FOR=(ALL_LOGFILES,ALL_ROLES)   DB_UNIQUE_NAME=o11gr2' scope=spfile;             
alter system set log_archive_dest_2='SERVICE=orcldg ASYNC   VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=o11gr2dg' scope=spfile;                              
alter system set log_archive_dest_state_1=enable scope=spfile;                  
alter system set log_archive_dest_state_2=enable scope=spfile; 
alter system set log_archive_format='%t_%s_%r.dbf' scope=spfile;                  
alter system set log_archive_max_processes=30 scope=spfile;                      
alter system set log_file_name_convert= scope=spfile;                           
alter system set remote_login_passwordfile=EXCLUSIVE scope=spfile;              
alter system set standby_file_management=auto scope=spfile;  




