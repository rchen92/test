##temp表空间的管理
##建立temp表空间
##创建临时表空间组
##临时表空间的好处
##设置默认的temp表空间



temp   临时表空间

默认的临时表空间
SQL> select property_name,property_value from database_properties  where property_name like '%TEMP%';
PROPERTY_NAME		       PROPERTY_VALUE
------------------------------ ---------------
DEFAULT_TEMP_TABLESPACE        TEMP

temp临时表空间主要的作用是进行排序，存放临时数据。
排序首先是在内存中进行，如果内存中完成不了，就会采用临时表空间进行排序。

temp表空间的管理
	如何建立temp表空间，temp表空间组
	如何指定排序的temp表空间
	备份（不需要）
	临时的表空间不在，丢失，损坏，空间不足，如何解决
		方法1：建立新的temp表空间，设置为新的，然后删除旧的
		方法2：给临时表空间加tempfile
		方法3：采用temp group

#建立temp表空间
SQL> CREATE TEMPORARY TABLESPACE temp1 TEMPFILE '/u01/app/oracle/oradata/orcl/temp1.dbf' size 100m;
SQL> SELECT FILE_NAME,FILE_ID,TABLESPACE_NAME FROM DBA_TEMP_FILES;
FILE_NAME					 TABLESPACE_NAME
--------------------------------------------- ------------------------------
/u01/app/oracle/oradata/orcl/temp1.dbf		  TEMP1
SQL> SELECT NAME FROM V$TEMPFILE;
NAME
---------------------------------------------
/u01/app/oracle/oradata/orcl/temp1.dbf

SQL> CREATE TEMPORARY TABLESPACE temp2 TEMPFILE '/u01/app/oracle/oradata/orcl/temp2.dbf' SIZE 100M TABLESPACE GROUP temp11;
Tablespace created.			#创建临时表空间组
SQL> ALTER TABLESPACE temp1 TABLESPACE GROUP temp11;		#将temp1表空间加入到temp11临时表空间组里面
SQL> SELECT * FROM DBA_TABLESPACE_GROUPS;
GROUP_NAME		       TABLESPACE_NAME
------------------------------ ------------------------------
TEMP11			       TEMP1
TEMP11			       TEMP2

一个temp group最少需要一个temp表空间
如果删除了temp group下面所有的temp tablespace，那么temp group也就不存在了
temp group的名字和temp tablespace的名字不能相同

临时表空间的好处
	SQL语句在进行并发操作的时候，需要排序，那么排序的时候如果使用了temp表空间组，如果并发的粒度是2，temp group成员也是2个，那么一个并行度给你指定一个temp表空间，这样可以让你并发处理，避免了磁盘排序的性能低下
	并发操作时，回话可以分布在不同的temp表空间中去，保证了用户能够实现快速响应
	直接可以在temp表空间上面指定大小

#设置默认的temp表空间
SQL> ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp1;
#设置用户默认排序的temp表空间
SQL> ALTER USER scott TEMPORARY TABLESPACE temp1;








