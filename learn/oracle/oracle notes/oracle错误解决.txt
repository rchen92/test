在安装grid时的报错
在运行root.sh时显示
/u01/app/grid/product/11.2.0/grid/bin/clscfg.bin: error while loading shared libraries: libcap.so.1: cannot open shared object file: No such file or directory			#没有libcap.so.1
Failed to create keys in the OLR, rc = 32512, 32512
OLR configuration failed
解决方法：
	# cd /lib64
	# ls libcap*
	libcap-ng.so.0 libcap-ng.so.0.0.0 libcap.so.2 libcap.so.2.16
	# ln -s libcap.so.2.16 libcap.so.1
	然后再安装目录下执行回退命令
	# /u01/app/grid/product/11.2.0/grid/crs/install/roothas.pl -deconfig -force -verbose
再运行root.sh时又继续显示
ohasd failed to start: Inappropriate ioctl for device
ohasd failed to start: Inappropriate ioctl for device at /u01/app/grid/product/11.2.0/grid/crs/install/roothas.pl line 296.
解决方法：
	先执行回退命令
	# /u01/app/grid/product/11.2.0/grid/crs/install/roothas.pl -deconfig -force -verbose
	再运行root.sh脚本，在出现Adding daemon to inittab的时候
	在root下执行  /bin/dd if=/var/tmp/.oracle/npohasd of=/dev/null bs=1024 count=1
最后就成功了
	The inventory is located at /u01/app/oraInventory
	'UpdateNodeList' was successful.

设置OHASD随系统启动而启动，编辑
# vim /etc/init/oracle-ohasd.conf
#Oracle OHASD startup
start on runlevel [35]
stop on runlevel [!35]
respawn
exec /etc/init.d/init.ohasd run >/dev/null 2>&1 </dev/null


shutdown immediate关数据库的时候出现ORA-01089: immediate shutdown in progress - no operations are permitted的错误。
ps -ef|grep ora_发现oracle的各个后台进程仍然在运行着，说明数据库没有关闭成功。
解决方法如下：
先exit退出，重新登录：
SQL> conn scott/oracle
ERROR:
ORA-01089: immediate shutdown in progress - no operations are permitted
Process ID: 0
Session ID: 0 Serial number: 0


Warning: You are no longer connected to ORACLE.
SQL> exit
[oracle@oracle-server oracle]$ sqlplus /nolog
SQL> conn / as sysdba
Connected to an idle instance.
SQL> shutdown abort;
ORACLE instance shut down.
SQL> startup force;
ORACLE instance started.

Total System Global Area  534462464 bytes
Fixed Size		    2215064 bytes
Variable Size		  402654056 bytes
Database Buffers	  125829120 bytes
Redo Buffers		    3764224 bytes
Database mounted.
Database opened.
SQL> exit
[oracle@oracle-server oracle]$ srvctl start database -d orcl


-----------------------------------------
删除表格时的问题
SQL> SELECT * FROM tab;
TNAME			       TABTYPE	CLUSTERID
------------------------------ ------- ----------
BONUS			       TABLE
D			       TABLE
DEPT			       TABLE
E			       TABLE
EMP			       TABLE
SALGRADE		       TABLE
XUESHENG		       TABLE
SQL> DROP table e;			#把表e删除
Table dropped.
SQL> SELECT * FROM tab;
TNAME			       TABTYPE	CLUSTERID
------------------------------ ------- ----------
BIN$L8gH+ZlgkHPgUKjACjhZYQ==$0 TABLE		#结果多出来这个东西。。。
BONUS			       TABLE
D			       TABLE
DEPT			       TABLE
EMP			       TABLE
SALGRADE		       TABLE
XUESHENG		       TABLE
#从oracle10g开始删除数据库表的时候并不是真正删除，而是放到了recyclebin中(类似windows里面删除的文件会被临时放到回收站中)。删除的表系统会自动给他重命名就是你看到的[BIN$]开头的名字。通过：show recyclebin 命令可以查看被删掉的表的详细信息，或者查询：select * from recyclebin。收回表的命令：flashback table 原表名 to before drop。清空回收站的命令：purge recyclebin。如果不想删除的表经过回收站：
drop table 表名 purge。或者停用数据库的回收战功能，修改隐藏参数 _recyclebin。10.1版本中：alter system set "_recyclebin" = false。10.2版本中：alter system set recyclebin = off;		不建议将其关闭，不安全
SQL> SELECT * FROM recyclebin;
OBJECT_NAME	ORIGINAL_NAME OPERATION TYPE TS_NAME CREATETIME DROPTIME DROPSCN     CAN CAN	RELATED	BASE_OBJECT PURGE_OBJECT	SPACE
----------- ------------- --------- ----- ------- --------- -------- --------    --- --- ---------- ----------- ------------ ----------
BIN$L8gH+ZlgkHP E		  DROP     TABLE USERS  03-29:15:35 04-06:09:39  1166667  YES YES	  74600		 74600		   74600	     8

SQL> FLASHBACK table "BIN$L8gH+ZlgkHPgUKjACjhZYQ==$0" TO BEFORE DROP;
Flashback complete.
SQL> SELECT * FROM tab;
TNAME			       TABTYPE	CLUSTERID
------------------------------ ------- ----------
BONUS			       TABLE
D			       TABLE
DEPT			       TABLE
E			       TABLE			#表格e又回来了
EMP			       TABLE
SALGRADE		       TABLE
XUESHENG		       TABLE
SQL> DROP table e purge;
Table dropped.
SQL> SELECT * FROM tab;				#e表被完全删除了
TNAME			       TABTYPE	CLUSTERID
------------------------------ ------- ----------
BONUS			       TABLE
D			       TABLE
DEPT			       TABLE
EMP			       TABLE
SALGRADE		       TABLE


再虚拟机中重启rhel6后，oracle服务没有启动
[grid@oracle-server ~]$ lsnrctl status		#在grid中查看监听
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
TNS-12541: TNS:no listener
 TNS-12560: TNS:protocol adapter error
  TNS-00511: No listener
   Linux Error: 111: Connection refused
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=oracle-server)(PORT=1521)))
TNS-12541: TNS:no listener
 TNS-12560: TNS:protocol adapter error
  TNS-00511: No listener
   Linux Error: 111: Connection refused
[grid@oracle-server ~]$ lsnrctl start		#先将监听启动起来
System parameter file is /u01/app/grid/product/11.2.0/grid/network/admin/listener.ora
Log messages written to /u01/app/grid/diag/tnslsnr/oracle-server/listener/alert/log.xml
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=oracle-server)(PORT=1521)))
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
Start Date                24-MAY-2016 12:04:18
Uptime                    0 days 0 hr. 0 min. 1 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   /u01/app/grid/product/11.2.0/grid/network/admin/listener.ora
Listener Log File         /u01/app/grid/diag/tnslsnr/oracle-server/listener/alert/log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=oracle-server)(PORT=1521)))
The listener supports no services			#但是这里报错了
The command completed successfully
[grid@oracle-server ~]$ vim /u01/app/grid/product/11.2.0/grid/network/admin/listener.ora	#在最后添加如下内容
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (GLOBAL_DBNAME = orcl)
      (SID_NAME = orcl)
    )
  )
[grid@oracle-server ~]$ lsnrctl stop
[grid@oracle-server ~]$ lsnrctl start
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
Start Date                24-MAY-2016 12:43:36
Uptime                    0 days 0 hr. 0 min. 1 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   /u01/app/grid/product/11.2.0/grid/network/admin/listener.ora
Listener Log File         /u01/app/grid/diag/tnslsnr/oracle-server/listener/alert/log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=oracle-server)(PORT=1521)))
Services Summary...
Service "orcl" has 1 instance(s).
  Instance "orcl", status UNKNOWN, has 1 handler(s) for this service...
The command completed successfully
[oracle@oracle-server ~]$ dbstart			#在oracle下启动数据库
ORACLE_HOME_LISTNER is not SET, unable to auto-start Oracle Net Listener	#但是这里会报错
Usage: /u01/app/oracle/product/11.1.0/dbhome_1/bin/dbstart ORACLE_HOME
[oracle@oracle-server ~]$ vim /u01/app/oracle/product/11.1.0/dbhome_1/bin/dbstart
#ORACLE_HOME_LISTNER=$1	 --->   ORACLE_HOME_LISTNER=$ORACLE_HOME
[oracle@oracle-server ~]$ dbstart 
[oracle@oracle-server ~]$ sqlplus / as sysdba 
SQL> startup
ORA-01078: failure in processing system parameters
ORA-01565: error in identifying file '+DATA/orcl/spfileorcl.ora'
ORA-17503: ksfdopn:2 Failed to open file +DATA/orcl/spfileorcl.ora
ORA-29701: unable to connect to Cluster Synchronization Service
SQL> exit


linux系统重启后，如何正常启动oracle，grid asm。
[grid@oracle-server ~]$ cat /etc/inittab
h1:35:respawn:/etc/init.d/init.ohasd run >/dev/null 2>&1 </dev/null
[grid@oracle-server ~]$ /etc/init.d/init.ohasd run

SQL> desc v$asm_diskgroup
 Name					   Null?    Type
 ----------------------------------------- -------- ----------------------------
 GROUP_NUMBER					    NUMBER
 NAME						    VARCHAR2(30)
 SECTOR_SIZE					    NUMBER
 BLOCK_SIZE					    NUMBER
 ALLOCATION_UNIT_SIZE				    NUMBER
 STATE						    VARCHAR2(11)
 TYPE						    VARCHAR2(6)
 TOTAL_MB					    NUMBER
 FREE_MB					    NUMBER
 HOT_USED_MB					    NUMBER
 COLD_USED_MB					    NUMBER
 REQUIRED_MIRROR_FREE_MB			    NUMBER
 USABLE_FILE_MB 				    NUMBER
 OFFLINE_DISKS					    NUMBER
 COMPATIBILITY					    VARCHAR2(60)
 DATABASE_COMPATIBILITY 			    VARCHAR2(60)
 VOTING_FILES					    VARCHAR2(1)

SQL> select state from v$asm_diskgroup;
STATE
-----------
MOUNTED
MOUNTED

如果设置了如下文件，则能随机自启动
[root@oracle-server ~]# vim /etc/init/oracle-ohasd.conf
#Oracle OHASD startup
start on runlevel [35]
stop on runlevel [!35]
respawn
exec /etc/init.d/init.ohasd run >/dev/null 2>&1 </dev/null









