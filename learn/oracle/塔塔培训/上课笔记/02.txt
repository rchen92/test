
--查看omf是否开启(默认开启)
    --表空间的omf参数db_create_file_dest
    --日志文件的db_create_online_log_dest,没指定就用db_create_file_dest



--新建用户
CREATE USER ocp
      IDENTIFIED BY oracle
      DEFAULT TABLESPACE tbs_ocp
      TEMPORARY TABLESPACE TEMP
      PROFILE DEFAULT
      ACCOUNT UNLOCK;

ORA-01045: user OCP lacks CREATE SESSION privilege; logon denied

GRANT CONNECT TO ocp;
GRANT RESOURCE TO ocp; 
  --限制用户只能使用tbs_ocp表空间  
revoke unlimited tablespace from ocp;
alter user ocp quota unlimited on tbs_ocp;

create table test (id varchar(100 char));
create index i$test$id on test(id) online;

create view v_test as select * from test;
ORA-01031: 权限不足

grant create view to ocp;

修改password
ALTER USER txy IDENTIFIED BY password;
修改口令并解锁
ALTER USER hr IDENTIFIED BY password ACCOUNT unlock;

create or replace view view_txn_succ as
select * from TBL_TXN_SUCC
union all
select * from TBL_TXN_SUCC_his;

drop view view_txn_succ;
create view view_txn_succ as
select * from TBL_TXN_SUCC
union all
select * from TBL_TXN_SUCC_his;

--建立测试序列
CREATE SEQUENCE Seq_employees
START WITH 1
INCREMENT BY 1
MINVALUE 1
CACHE 100
NOCYCLE 
ORDER ;
select Seq_employees.nextval from dual; 
select Seq_employees.currval from dual; 


CREATE GLOBAL TEMPORARY table tmp_hr_employees2 
ON COMMIT delete ROWS 
as select * from hr.employees;
select * from tmp_hr_employees2;
insert into tmp_hr_employees2 select * from hr.employees;
commit;

CREATE GLOBAL TEMPORARY table tmp_hr_employees2 
ON COMMIT delete ROWS 
as select * from hr.employees;
select * from tmp_hr_employees2;
insert into tmp_hr_employees2 select * from hr.employees;
commit;

CREATE GLOBAL TEMPORARY table tmp_hr_employees 
ON COMMIT PRESERVE ROWS 
as select * from hr.employees;

CREATE GLOBAL TEMPORARY table tmp_hr_deparments 
ON COMMIT delete ROWS 
as select * from hr.deparments;
select * from tmp_hr_deparments;
insert into tmp_hr_deparments select * from hr.employees;
select * from tmp_hr_deparments;
commit;
select * from tmp_hr_deparments;

CREATE GLOBAL TEMPORARY table tmp_hr_departments 
ON COMMIT delete ROWS 
as select * from hr.departments;
select * from tmp_hr_departments;
insert into tmp_hr_departments select * from hr.departments;
select * from tmp_hr_departments;
commit;
select * from tmp_hr_departments;































